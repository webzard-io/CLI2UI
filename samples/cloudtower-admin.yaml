# yaml-language-server: $schema=../cli.schema.json
name: CloudTower Admin
command:
  name: ./cloudtower-admin
  display: CloudTower Admin
  flags:
    - name: v
      display: Verbosity
      type: enum
      options:
        - "0"
        - "1"
        - "2"
        - "3"
        - "4"
  subcommands:
    - name: deploy
      display: Deploy
    - name: diagnose
      display: Diagnose
    - name: logs
      display: Logs
      subcommands:
        - name: k8s
          display: K8s
          args:
            - name: Service
              type: enum
              required: true
              options:
                - agent-mesh-hub
                - import-data
                - observer
                - openresty
                - postgres
                - prepare-static
                - prisma
                - prisma-worker
                - rollback
                - server
          flags:
            - name: f
              display: Follow
              type: boolean
    - name: ps
      display: Show Status
      subcommands:
        - name: host
          display: Host
          args:
            - name: Service
              type: enum
              required: true
              options:
                - containerd
                - kubelet
          flags:
            - name: o
              display: Output Format
              type: enum
              options:
                - table
                - json
                - yaml
        - name: k8s
          display: K8s
          args:
            - name: Service
              type: enum
              required: true
              options:
                - agent-mesh-hub
                - import-data
                - observer
                - openresty
                - postgres
                - prepare-static
                - prisma
                - prisma-worker
                - rollback
                - server
    - name: upgrade
      display: Upgrade
      args:
        - name: path
          display: Path
          description: Path to upgrade.tar.gz
          type: string
    - name: config
      display: Configure CloudTower
      flags:
        - name: e
          display: URL to ELF cluster
          type: string
          description: Specify when CloudTower is not running in a VM in the target ELF cluster
        - name: u
          display: Username
          type: string
          description: Specify when CloudTower is not running in a VM in the target ELF cluster
        - name: p
          display: Password
          type: string
          description: Specify when CloudTower is not running in a VM in the target ELF cluster
      subcommands:
        - name: base
          display: CPU/Memory
          flags:
            - name: c
              display: Number of cores
              type: number
            - name: m
              display: Memory in GB
              type: number
        - name: dns
          display: DNS
          args:
            - name: ns
              display: Nameservers
              type: string
              description: Comma delimited list of nameservers
              required: true
        - name: nics
          display: IP
          flags:
            - name: i
              display: IP Address
              type: string
              required: true
            - name: s
              display: Subnet Mask
              type: string
              required: true
            - name: g
              display: Gateway
              type: string
              required: true
            - name: d
              display: DNS
              type: string
              required: true
            - name: f
              display: Force
              type: boolean
              required: true

